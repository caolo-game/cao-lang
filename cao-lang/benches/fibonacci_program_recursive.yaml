submodules: {}
imports: []
lanes:
  main:
    # Assumes that N is pushed onto the stack before executing the program
    arguments:
      - N
    cards:
      - ty: ReadVar
        val: N
      - ty: Jump
        val: fib
      - ty: SetGlobalVar
        val: result

  fib:
    arguments:
      - N
    cards:
      - ty: ReadVar
        val: N
      - ty: ScalarInt
        val: 2
      - ty: ReadVar
        val: N
      - ty: LessOrEq
      - ty: IfElse
        val:
          then:
            ty: Jump
            val: fib_again
          else:
            ty: ScalarInt
            val: 1
      - ty: Return

  fib_again:
    arguments:
      - N
    cards:
      - ty: ReadVar
        val: N
      - ty: ScalarInt
        val: 1
      - ty: Sub
      - ty: Jump
        val: fib
      - ty: ReadVar
        val: N
      - ty: ScalarInt
        val: 2
      - ty: Sub
      - ty: Jump
        val: fib
      - ty: Add
      - ty: Return
